<script type="text/javascript">
  RED.nodes.registerType('alice-sh-device', {
    category: 'config',
    defaults: {
      name: {value: 'Лампочка Ильича', required: true},
      service: {value: '', type: 'alice-sh-service'},
      description: {value: ''},
      room: {value: 'Туалет', required: true},
      dtype: {value: 'devices.types.light', required: true}
    },
    paletteLabel: 'device',
    label: function() {
      return `${this.room}:${this.name}` || 'Alice Device';
    },
    oneditprepare: function() {
      $('#node-config-input-dtype').typedInput({
        types: [
          {
            options: [
              {value: 'devices.types.light', label: 'Light'},
              {value: 'devices.types.light.ceiling', label: 'Light Сeiling'},
              {value: 'devices.types.light.strip', label: 'Light Strip'},
              {value: 'devices.types.socket', label: 'Socket'},
              {value: 'devices.types.switch', label: 'Switch'},
              {value: 'devices.types.thermostat', label: 'Thermostat'},
              {value: 'devices.types.thermostat.ac', label: 'Air onditioning'},
              {value: 'devices.types.media_device', label: 'Multimedia'},
              {value: 'devices.types.media_device.tv', label: 'TV'},
              {value: 'devices.types.media_device.tv_box', label: 'TV Box'},
              {value: 'devices.types.media_device.receiver', label: 'AV Receiver'},
              {value: 'devices.types.camera', label: 'Camera'},
              {value: 'devices.types.cooking', label: 'Kitchen appliances'},
              {value: 'devices.types.cooking.coffee_maker', label: 'Coffee machine'},
              {value: 'devices.types.cooking.kettle', label: 'Smart kettle'},
              {value: 'devices.types.cooking.multicooker', label: 'Multicooker'},
              {value: 'devices.types.openable', label: 'Door, gate, window, shutters'},
              {value: 'devices.types.openable.curtain', label: 'Curtains, blinds'},
              {value: 'devices.types.openable.valve', label: 'Ball valve'},
              {value: 'devices.types.humidifier', label: 'Humidifier'},
              {value: 'devices.types.purifier', label: 'Air purifier'},
              {value: 'devices.types.ventilation', label: 'Breezer, ventilation hood'},
              {value: 'devices.types.ventilation.fan', label: 'Fan'},
              {value: 'devices.types.vacuum_cleaner', label: 'Robotic vacuum cleaner'},
              {value: 'devices.types.washing_machine', label: 'Washing machine'},
              {value: 'devices.types.dishwasher', label: 'Dishwasher'},
              {value: 'devices.types.iron', label: 'Iron, steamer'},
              {value: 'devices.types.sensor', label: 'Sensor'},
              {value: 'devices.types.sensor.motion', label: 'Sensor motion'},
              {value: 'devices.types.sensor.vibration', label: 'Sensor vibration'},
              {value: 'devices.types.sensor.illumination', label: 'Sensor illumination'},
              {value: 'devices.types.sensor.open', label: 'Sensor open'},
              {value: 'devices.types.sensor.climate', label: 'Sensor climate'},
              {value: 'devices.types.sensor.water_leak', label: 'Sensor water_leak'},
              {value: 'devices.types.sensor.button', label: 'Sensor button'},
              {value: 'devices.types.sensor.gas', label: 'Sensor gas'},
              {value: 'devices.types.sensor.smoke', label: 'Sensor smoke'},
              {value: 'devices.types.smart_meter', label: 'Meter'},
              {value: 'devices.types.smart_meter.cold_water', label: 'Cold water meter'},
              {value: 'devices.types.smart_meter.hot_water', label: 'Hot water meter'},
              {value: 'devices.types.smart_meter.electricity', label: 'Electricity meter'},
              {value: 'devices.types.smart_meter.gas', label: 'Gas meter'},
              {value: 'devices.types.smart_meter.heat', label: 'Heat meter'},
              {value: 'devices.types.pet_drinking_fountain', label: 'Pet drinking fountain'},
              {value: 'devices.types.pet_feeder', label: 'Pet feeder'},
              {value: 'devices.types.other', label: 'Other'}
            ]
          }
        ]
      });
    }
  });
</script>

<script type="text/html" data-template-name="alice-sh-device">
  <div class="form-row">
    <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-config-input-name" placeholder="Name" />
  </div>

  <div class="form-row">
    <label for="node-config-input-service"><i class="fa fa-key"></i> Credentials</label>
    <input type="text" id="node-config-input-service" />
  </div>

  <div class="form-row">
    <label for="node-config-input-description"><i class="fa fa-comment-o"></i> Description</label>
    <input type="text" id="node-config-input-description" placeholder="Description" />
  </div>

  <div class="form-row">
    <label for="node-config-input-room"><i class="fa fa-bath"></i> Room</label>
    <input type="text" id="node-config-input-room" placeholder="Room" />
  </div>

  <div class="form-row">
    <label for="node-config-input-dtype"><i class="fa fa-cogs"></i> Type</label>
    <input type="text" id="node-config-input-dtype" placeholder="Type" />
  </div>
</script>

<script type="text/html" data-help-name="alice-sh-device">
  <p>Choose device type</p>

  <h3>References</h3>
  <ul>
    <li>
      <a target="_blank" href="https://yandex.ru/dev/dialogs/smart-home/doc/concepts/device-types.html">Yandex documentation</a>
    </li>
  </ul>
</script>
