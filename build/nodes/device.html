<script type="text/javascript">
  RED.nodes.registerType('alice-sh-device', {
    category: 'config',
    defaults: {
      name: {value: 'Лампочка Ильича', required: true},
      service: {value: '', type: 'alice-sh-service'},
      description: {value: ''},
      room: {value: 'Туалет', required: true},
      dtype: {value: 'devices.types.light', required: true}
    },
    paletteLabel: 'device',
    label: function () {
      return `${this.room}:${this.name}` || 'Alice Device';
    },
    oneditprepare: function () {
      $('#node-config-input-dtype').typedInput({
        types: [
          {
            options: [
              {value: 'devices.types.camera', label: 'Camera'},
              {value: 'devices.types.cooking', label: 'Cooking'},
              {value: 'devices.types.cooking.coffee_maker', label: 'Cooking Coffee Maker'},
              {value: 'devices.types.cooking.kettle', label: 'Cooking Kettle'},
              {value: 'devices.types.cooking.multicooker', label: 'Cooking Multicooker'},
              {value: 'devices.types.dishwasher', label: 'Dishwasher'},
              {value: 'devices.types.humidifier', label: 'Humidifier'},
              {value: 'devices.types.iron', label: 'Iron'},
              {value: 'devices.types.light', label: 'Light'},
              {value: 'devices.types.light.lamp', label: 'Light Lamp'},
              {value: 'devices.types.light.ceiling', label: 'Light Ceiling'},
              {value: 'devices.types.light.strip', label: 'Light Strip'},
              {value: 'devices.types.media_device', label: 'Media Device'},
              {value: 'devices.types.media_device.receiver', label: 'Media Device Receiver'},
              {value: 'devices.types.media_device.tv', label: 'Media Device Tv'},
              {value: 'devices.types.media_device.tv_box', label: 'Media Device Tv Box'},
              {value: 'devices.types.openable', label: 'Openable'},
              {value: 'devices.types.openable.curtain', label: 'Openable Curtain'},
              {value: 'devices.types.openable.valve', label: 'Openable Valve'},
              {value: 'devices.types.other', label: 'Other'},
              {value: 'devices.types.pet_drinking_fountain', label: 'Pet Drinking Fountain'},
              {value: 'devices.types.pet_feeder', label: 'Pet Feeder'},
              {value: 'devices.types.purifier', label: 'Purifier'},
              {value: 'devices.types.sensor', label: 'Sensor'},
              {value: 'devices.types.sensor.button', label: 'Sensor Button'},
              {value: 'devices.types.sensor.climate', label: 'Sensor Climate'},
              {value: 'devices.types.sensor.gas', label: 'Sensor Gas'},
              {value: 'devices.types.sensor.illumination', label: 'Sensor Illumination'},
              {value: 'devices.types.sensor.motion', label: 'Sensor Motion'},
              {value: 'devices.types.sensor.open', label: 'Sensor Open'},
              {value: 'devices.types.sensor.smoke', label: 'Sensor Smoke'},
              {value: 'devices.types.sensor.vibration', label: 'Sensor Vibration'},
              {value: 'devices.types.sensor.water_leak', label: 'Sensor Water Leak'},
              {value: 'devices.types.smart_meter', label: 'Smart Meter'},
              {value: 'devices.types.smart_meter.cold_water', label: 'Smart Meter Cold Water'},
              {value: 'devices.types.smart_meter.electricity', label: 'Smart Meter Electricity'},
              {value: 'devices.types.smart_meter.gas', label: 'Smart Meter Gas'},
              {value: 'devices.types.smart_meter.heat', label: 'Smart Meter Heat'},
              {value: 'devices.types.smart_meter.hot_water', label: 'Smart Meter Hot Water'},
              {value: 'devices.types.socket', label: 'Socket'},
              {value: 'devices.types.switch', label: 'Switch'},
              {value: 'devices.types.switch.relay', label: 'Switch Relay'},
              {value: 'devices.types.thermostat', label: 'Thermostat'},
              {value: 'devices.types.thermostat.ac', label: 'Thermostat Ac'},
              {value: 'devices.types.vacuum_cleaner', label: 'Vacuum Cleaner'},
              {value: 'devices.types.ventilation', label: 'Ventilation'},
              {value: 'devices.types.ventilation.fan', label: 'Ventilation Fan'},
              {value: 'devices.types.washing_machine', label: 'Washing Machine'}
            ]
          }
        ]
      });
    }
  });
</script>

<script type="text/html" data-template-name="alice-sh-device">
  <div class="form-row">
    <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-config-input-name" placeholder="Name" />
  </div>

  <div class="form-row">
    <label for="node-config-input-service"><i class="fa fa-key"></i> Credentials</label>
    <input type="text" id="node-config-input-service" />
  </div>

  <div class="form-row">
    <label for="node-config-input-description"><i class="fa fa-comment-o"></i> Description</label>
    <input type="text" id="node-config-input-description" placeholder="Description" />
  </div>

  <div class="form-row">
    <label for="node-config-input-room"><i class="fa fa-bath"></i> Room</label>
    <input type="text" id="node-config-input-room" placeholder="Room" />
  </div>

  <div class="form-row">
    <label for="node-config-input-dtype"><i class="fa fa-cogs"></i> Type</label>
    <input type="text" id="node-config-input-dtype" placeholder="Type" />
  </div>
</script>

<script type="text/html" data-help-name="alice-sh-device">
  <p>Choose device type</p>

  <h3>References</h3>
  <ul>
    <li>
      <a target="_blank" href="https://yandex.ru/dev/dialogs/smart-home/doc/concepts/device-types.html">Yandex documentation</a>
    </li>
  </ul>
</script>
